---
sidebar_position: 4
---

# 프로토콜 메커니즘

Zap Pilot은 정교한 비수탁 알고리즘 자산 배분 시스템으로 작동합니다. 여기서는 프로토콜 메커니즘이
내부적으로 어떻게 작동하는지 설명합니다.

## 시스템 아키텍처

### 비수탁 설계

Zap Pilot은 근본적인 원칙을 기반으로 구축되었습니다: **당신은 항상 자신의 자금을 통제합니다**.

- **수탁 없음**: 우리는 절대 당신의 자산을 보관하지 않습니다
- **직접 프로토콜 상호작용**: 당신의 지갑이 DeFi 프로토콜과 직접 상호작용합니다
- **투명한 실행**: 모든 작업이 온체인에서 감사 가능합니다
- **비상 탈출**: 필요시 프로토콜에서 직접 인출할 수 있습니다

## Vault 로직

### 테마별 Vault 구조

각 Vault는 큐레이션된 DeFi 프로토콜을 가진 특정 투자 전략을 나타냅니다:

#### **Vault 구성요소**

- **전략 정의**: 명확한 투자 논제와 목표 배분
- **프로토콜 화이트리스트**: 보안 표준을 충족하는 검증되고 감사된 프로토콜
- **위험 매개변수**: 프로토콜별 최대 배분 한도
- **리밸런싱 규칙**: 포트폴리오 조정을 트리거하는 조건

#### **동적 가중 시스템**

각 Vault 내 프로토콜은 다음을 기반으로 가중됩니다:

```
프로토콜 가중치 = 기본 가중치 × 성과 승수 × 위험 조정
```

**기본 가중치 요소:**

- Total Value Locked (TVL) - 스테이블코인 전략의 경우 최소 $300k
- 감사 이력 및 보안 점수
- 역사적 수익률 안정성
- 유동성 깊이

**성과 승수:**

- 최근 수익률 성과 vs 벤치마크
- 시간에 따른 수익률 일관성
- 프로토콜 거버넌스 건전성

**위험 조정:**

- 스마트 컨트랙트 위험 평가
- 거버넌스 토큰 집중도
- 프로토콜 연수 및 실전 테스트 기간

### 전략 실행 흐름

1. **사용자 예치** → Account Abstraction 지갑이 자금을 수령
2. **Vault 라우팅** → 적절한 테마별 Vault로 자금 전달
3. **프로토콜 분배** → 큐레이션된 프로토콜에 자산 배분
4. **지속적 모니터링** → 실시간 성과 및 위험 추적
5. **리밸런싱 트리거** → 분기별 제안 또는 임계값 기반 알림

## Kelly Allocation Strategy

### 수학적 기초

우리는 **Kelly Criterion**을 사용하여 최적의 포지션 크기를 결정하고, 위험을 관리하면서 장기적인
기하학적 성장을 극대화합니다.

#### **Kelly 공식**

```
최적 가중치 = (기대 수익률 - 무위험 이자율) / 분산
```

#### **다중 자산 Kelly 배분**

여러 자산을 가진 포트폴리오의 경우:

```
W* = Σ⁻¹ × (μ - rf × 1)
```

여기서:

- **W\*** = 최적 가중치 벡터
- **Σ⁻¹** = 수익률의 역공분산 행렬
- **μ** = 기대 수익률 벡터
- **rf** = 무위험 이자율
- **1** = 1의 벡터

### 실용적 구현

#### **위험 조정 Kelly**

고전적인 Kelly 공식을 수정하여 다음을 고려합니다:

- **최대 손실 한도** (보수적 15%, 적극적 30%)
- **상관관계 제약** (상관 자산에 최대 60%)
- **유동성 요구사항** (유동 포지션에 10% 유지)

#### **동적 리밸런싱 트리거**

리밸런싱은 다음 경우에 발생합니다:

- **배분 드리프트** > 목표 가중치에서 5%
- **위험 지표**가 사전 정의된 임계값 초과
- **새로운 기회**로 위험 조정 수익률이 현저히 개선
- **분기별 검토** (드리프트와 무관하게, 사용자 설정 가능)

## Account Abstraction 통합

### 지갑 아키텍처

#### **스마트 지갑 기능**

- **가스 없는 거래** (메타 트랜잭션을 통해)
- **배치 작업** (가스 효율성을 위해)
- **세션 키** (자동화된 전략용)
- **다중 서명 지원** (기관 사용자용)

#### **사용자 경험 혜택**

**초보자용:**

- 여러 체인에서 가스용 ETH를 보유할 필요 없음
- 원클릭 복잡한 작업
- 소셜 복구 옵션

**고급 사용자용:**

- 프로그래밍 가능한 거래 로직
- 자동화된 리밸런싱 권한
- 맞춤형 지출 제어

### 거래 배치

여러 작업을 단일 거래로 결합:

```
배치 거래 = [
  approve(token, amount),
  deposit(vault, amount),
  distribute(protocols[], weights[]),
  track(performance_metrics)
]
```

## 위험 관리 프레임워크

### 프로토콜 수준 안전장치

#### **자동화된 위험 모니터링**

- **TVL 임계값**: 최소 유동성 요구사항
- **수익률 이상 감지**: 비정상적으로 높거나 낮은 수익률 플래그
- **거버넌스 위험 평가**: 프로토콜 변경 모니터링
- **스마트 컨트랙트 모니터링**: 업그레이드 이벤트 추적

#### **분산화 제약**

- **단일 프로토콜 최대 배분**: 보수적 30%, 적극적 50%
- **자산 유형 분산**: 단일 자산 클래스에 70% 이하
- **체인 분산**: 여러 네트워크에 위험 분산

### 사용자 수준 제어

#### **위험 허용도 설정**

- **보수적**: 낮은 변동성, 안정적인 프로토콜만
- **적당함**: 균형 잡힌 위험/보상, 확립된 프로토콜
- **적극적**: 높은 위험 허용도, 새로운 프로토콜 포함

#### **비상 절차**

- **즉시 인출**: 직접 프로토콜 상호작용
- **위험 회피 모드**: 위기 시 자동으로 안전한 자산으로 이동
- **회로 차단기**: 극심한 변동성 중 자동화된 행동 중단

## 리밸런싱 메커니즘

### 트리거 조건

#### **임계값 기반 리밸런싱**

- 배분 드리프트가 목표를 5% 초과
- 위험 지표가 사전 정의된 한도 돌파
- > 2% 이점을 가진 수익률 기회 출현

#### **시간 기반 리밸런싱**

- **주간**: 활성 전략용 (선택사항, 높은 비용)
- **월간**: 표준 빈도 (권장)
- **분기**: 이메일 제안을 통한 저비용 접근법

### 실행 프로세스

1. **분석 단계**
   - 현재 vs 목표 배분 계산
   - 가스 비용 vs 리밸런싱 혜택 평가
   - 최적 실행 경로 식별

2. **사용자 승인**
   - 리밸런싱 제안 제시
   - 예상 비용과 혜택 표시
   - 수동 검토 및 수정 허용

3. **실행 단계**
   - 가스 효율성을 위한 배치 거래
   - 필요시 여러 체인에서 실행
   - 추적 및 분석 업데이트

## 성과 기여도 분석

### 실시간 분석

다음으로부터 성과 기여도 추적:

- **프로토콜 선택**: 어떤 프로토콜이 수익을 견인했는가
- **배분 타이밍**: 리밸런싱 결정의 영향
- **체인 최적화**: 크로스체인 전략의 혜택
- **비용 관리**: 가스 효율성 및 수수료 최적화

### 벤치마크 비교

전략 성과를 다음과 비교:

- **시장 지수**: Bitcoin, Ethereum, DeFi 지수
- **전통 금융**: S&P 500, 채권 지수
- **DeFi 벤치마크**: 프로토콜별 수익률
- **위험 조정 지표**: Sharpe 비율, Sortino 비율

---

이러한 메커니즘을 이해하면 DeFi 전략에 대한 정보에 입각한 결정을 내리는 데 도움이 됩니다. 우리
시스템은 복잡성을 처리하면서 당신이 통제권을 유지할 수 있게 합니다.

👉 **[전략 탐색 →](../strategies)** 👉 **[보안 세부사항 보기 →](../security)**
